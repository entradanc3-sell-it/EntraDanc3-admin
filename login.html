
<!DOCTYPE html><html lang="es"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin | Login</title>
<link rel="stylesheet" href="styles.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="config.js?v=2"></script>
</head><body>
<div class="container" style="max-width:460px">
  <h1>EntraDanc3 · Admin</h1>
  <p class="sub">Ingresá con tu usuario de Firebase (Email/Password)</p>
  <div class="card" style="padding:18px">
    <label>Email</label><input id="email" type="email" placeholder="tu@email.com">
    <label>Password</label><input id="pass" type="password" placeholder="••••••••">
    <button class="btn" id="loginBtn" style="margin-top:12px;width:100%">Ingresar</button>
    <div id="msg" class="sub" style="margin-top:10px"></div>
  </div>
</div>
<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';


if (!window.FB_CONFIG) {
  alert('No se cargó config.js. Subí config.js a la raíz del admin y revisá <script src="config.js">');
}

  const app  = initializeApp(window.FB_CONFIG);
  const auth = getAuth(app);

const $ = (id)=>document.getElementById(id);
const msg = document.createElement('div'); msg.id='msg'; msg.style.marginTop='10px';
document.querySelector('.card').appendChild(msg);

$('loginBtn').onclick = async () => {
  msg.textContent = 'Ingresando…';
  try {
    const email = $('email').value.trim();
    const pass  = $('pass').value.trim();
    await signInWithEmailAndPassword(auth, email, pass);
   location.href = 'dashboard.html'; // relativo para GitHub Pages
  } catch (e) {
    console.error(e);
    msg.textContent = (e.code || e.message || e).toString();
  }
};

onAuthStateChanged(auth, (u) => {
  if (u && u.uid === window.ADMIN_UID) {
    location.href = 'dashboard.html';
  }
});
</script>

</body></html>
